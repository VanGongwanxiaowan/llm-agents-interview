https://mp.weixin.qq.com/s?__biz=MzIzMDc2Njc0MQ==&mid=2247486103&idx=1&sn=a3ff2a4f238834b2fc4e03a4424756fe&chksm=e8af2b6ddfd8a27b7c9a5e3ef759af96b7675119768a53ae1ebbda3704f6bfbe499397c4f61d&cur_album_id=3386763082605215744&scene=189#wechat_redirect

# 网页总结：Multi Agent 技术概览与实践方向
本文由Afunby于2024年6月9日发布，聚焦AI领域热门的Agent技术，围绕AI Agent、Multi-Agent、开发框架AutoGen及多代理对话框架展开详细介绍，并规划了Multi-Agent系列文章的写作方向，旨在帮助读者掌握多智能体协同机制。

## 一、系列文章规划
作者计划从三个角度撰写Multi-Agent系列文章，覆盖不同技术背景用户需求：
1. **面向开发者**：使用AutoGen搭建多智能体，从代码角度实现Multi-Agent Conversations，此方式可能是未来大模型应用构建新范式。
2. **面向开发者与非技术业务人员**：使用支持本地化部署的大模型开发软件，以零代码方式搭建多智能体。
3. **面向无编程技术背景者**：使用字节Coze搭建基于Agent的微信公众号小助手，助力日常应用Agent。

## 二、AI Agent核心解析
### 1. 定义
在AI领域，Agent是具备感知能力、能根据环境观察决策反应的实体，可分为软件形式（如对话机器人）和物理形态（如机器人）；在LLM领域，AI Agent特指应用LLM能力的Agent。

### 2. 核心架构（三大模块）
#### （1）Planning（规划）
根据过去行为与目标动态规划下一步行动，核心技术包括：
- **Reflexion（反思）**：Agent思考任务反馈、存储任务回合记忆，从过往行动吸取教训优化决策，与强化学习中Model-free算法类似，但更依赖经验启发、实现更灵活（含逻辑推理），后者有明确数学定义与优化目标。
- **Chain of Thought（思维链）**：借助提示技术，让大语言模型建立类人类推理思维，如论文《Tree of Thoughts》提出用树/图结构管理上下文减少提示次数。
- **Decompose（分解）**：将复杂问题拆分为更小易解决的模块，再用不同工具处理。
- **ReAct**：结合Reflexion与Action，使Agent反复思考、行动、观察以解决复杂任务，LangChain和LlamaIndex已在代理框架中实现。

#### （2）Tools（工具）
Agent按计划解决问题时可借助的工具，主要包括：
- **RAG**：整合外部数据（向量数据库存储的信息、大型语料库等）增强Agent响应能力。
- **Search Tools**：如Google、Bing、维基百科等，帮助Agent浏览检索信息辅助决策。
- **Code interpreter**：辅助Agent理解和执行代码的外部工具。
- **Custom tools**：利用外部功能或API端点，大幅提升Agent能力。

#### （3）Memory（记忆）
分为短期记忆与长期记忆，支撑Agent信息存储与调用：
| 类型 | 定义 | 特点 | 示例 |
| ---- | ---- | ---- | ---- |
| 短期记忆（Short-term Memory） | Agent在当前任务/对话会话中存储使用的信息，含近期对话上下文、任务状态、临时数据 | 临时有效，仅在当前任务/会话中作用，用于保持对话连贯性与上下文关联，任务结束/会话终止后信息多被清除 | ChatGPT一轮对话中，记忆该轮所有上下文并用于回答 |
| 长期记忆（Long-term Memory） | Agent在多个任务/会话中存储使用的信息，含用户偏好、历史记录、知识库、经验教训 | 持久化，跨任务/会话保留，可关联不同场景信息形成全面知识网络 | ChatGPT的“Memory”设置，系统重启/会话结束后信息仍存在 |

此外，语义缓存与标准缓存（Semantic or standard cache）可作为长期存储器扩展，将指令对和LLM答案存于数据库/向量数据库，Agent查询前先检查缓存，以加快响应、降低API调用成本。

### 3. 形象类比
若将Agent比作人类，**LLM + Planning + Memory** 相当于Agent的“大脑”，负责思考与记忆；**Tools** 则相当于Agent的“四肢”，负责执行具体操作。

## 三、Multi-Agent（多智能体）
### 1. 定义
将多个单一Agent按特定工作流编排，每个Agent负责不同任务，形成多智能体架构，类似实际工作流程/组织结构（不同能力人员各司其职，工序结果流转至下一环节）。

### 2. 应用示例（智慧城市数据分析工作流）
- **Agent-1**：负责数据收集与预处理，从气象、交通、环保等部门接口获取原始数据，进行去重、缺失值填补、格式转换，使用经济的GPT-3.5模型。
- **Agent-2**：接收Agent-1结果，进行数据加载与深度分析，使用本地微调的Mistral 7B模型。
- **Agent-3**：负责数据可视化，将Agent-2的分析结果转化为图表，提供含筛选、放大、导出等交互功能的用户界面。

### 3. 与Single Agent（单一智能体）的优势对比
从Interface（交互层面）和Architecture（架构层面）两个维度分析：
| 维度 | 对比内容 |
| ---- | ---- |
| Interface（交互层面） | - 单一Agent：用户仅与单个Agent交互，用户体验简洁，但无法满足需观察多Agent行为的场景<br>- Multi-Agent：可让用户明确看到多Agent工作（如多Agent辩论、社会模拟实验），适配特定场景需求 |
| Architecture（架构层面） | - 单一Agent：难以构建满足所有功能的系统，维护扩展难度较高<br>- Multi-Agent：更易维护扩展，系统模块化程度高，开发人员可灵活添加/删除功能组件；可组合不同Agent与LLM，满足多样化使用需求 |

## 四、开发框架：AutoGen
### 1. 框架定位
Multi-Agent开发框架之一（其他如CrewAI、Agent Protocol），本文系列代码实践均基于此框架，可用于开发LLM应用程序。

### 2. 核心特点
- 代理可定制、可对话，支持人类无缝参与。
- 代理能以LLMs、人工输入、工具组合的多种模式运行。
- 通过多代理间对话协作完成任务。

## 五、多代理对话框架（Multi-Agent Conversation Framework）
### 1. 核心作用
AutoGen通过该框架构建LLM应用程序，整合可定制、可对话的Agent，将LLMs、工具、人类融合，通过自动化多能力Agent间的聊天，实现自主执行任务或结合人类反馈执行任务。

### 2. 交互流程示例（绘制META和TESLA股票价格相关图表）
1. 用户通过User Proxy Agent（用户代理）提出需求：“绘制META和TESLA股票价格变化的图表”。
2. User Proxy Agent向Assistant Agent（助手代理，配置为编写Python代码的大模型）发起绘图请求。
3. Assistant Agent提供执行代码，User Proxy Agent反馈错误（未安装yfinance包）。
4. Assistant Agent建议先安装yfinance包，User Proxy Agent完成安装。
5. Assistant Agent生成股票价格变化图表输出。
6. User Proxy Agent进一步请求绘制百分比变化图表。
7. Assistant Agent提供修正后代码。
8. 最终生成并输出股票价格百分比变化图表。

## 六、后续计划与参考资料
### 1. 后续内容
将展示多智能体应用搭建过程，进一步深入探讨本文相关概念。

### 2. 参考资料
1. Medium文章（作者Han HELOIR）：https://towardsdatascience.com/the-future-of-generative-ai-is-agentic-what-you-need-to-know-01b7e801fa69
2. 通往AGI之路知识库文章：https://waytoagi.feishu.cn/wiki/CT3UwDM8OiVmOOkohPbcV3JCndb
3. DB-GPT项目负责人陈发强文章：https://www.bestblogs.dev/article/d90296
4. 论文《Tree of Thoughts》：https://arxiv.org/pdf/2305.10601
5. AutoGen官方博客：https://microsoft.github.io/autogen/blog
6. AutoGen官方文档：https://microsoft.github.io/autogen/
